"use strict";exports.id=171,exports.ids=[171],exports.modules={74171:(rt,he,r)=>{r.d(he,{GetRoleCredentialsCommand:()=>Te,SSOClient:()=>tt});var $=r(90325),me=r(89744),n=r(96572);const pe=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),ye={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class m extends n.TJ{constructor(t){super(t),Object.setPrototypeOf(this,m.prototype)}}class A extends m{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,A.prototype)}}class T extends m{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,T.prototype)}}class w extends m{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,w.prototype)}}class k extends m{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,k.prototype)}}const ge=e=>({...e,...e.accessToken&&{accessToken:n.$H}}),Se=e=>({...e,...e.secretAccessKey&&{secretAccessKey:n.$H},...e.sessionToken&&{sessionToken:n.$H}}),ve=e=>({...e,...e.roleCredentials&&{roleCredentials:Se(e.roleCredentials)}}),it=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),dt=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}}),ct=e=>({...e,...e.accessToken&&{accessToken:SENSITIVE_STRING}});var F=r(43351),S=r(64663);const fe=async(e,t)=>{const s=(0,S.lI)(e,t),o=(0,n.Tj)({},n.eU,{[C]:e[E]});s.bp("/federation/credentials");const a=(0,n.Tj)({[Ae]:[,(0,n.Y0)(e[be],"roleName")],[j]:[,(0,n.Y0)(e[L],"accountId")]});let i;return s.m("GET").h(o).q(a).b(i),s.build()},lt=async(e,t)=>{const s=rb(e,t),o=map({},isSerializableHeaderValue,{[C]:e[E]});s.bp("/assignment/roles");const a=map({[M]:[,e[U]],[G]:[()=>e.maxResults!==void 0,()=>e[H].toString()],[j]:[,__expectNonNull(e[L],"accountId")]});let i;return s.m("GET").h(o).q(a).b(i),s.build()},ut=async(e,t)=>{const s=rb(e,t),o=map({},isSerializableHeaderValue,{[C]:e[E]});s.bp("/assignment/accounts");const a=map({[M]:[,e[U]],[G]:[()=>e.maxResults!==void 0,()=>e[H].toString()]});let i;return s.m("GET").h(o).q(a).b(i),s.build()},ht=async(e,t)=>{const s=rb(e,t),o=map({},isSerializableHeaderValue,{[C]:e[E]});s.bp("/logout");let a;return s.m("POST").h(o).b(a),s.build()},xe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return R(e,t);const s=(0,n.Tj)({$metadata:h(e)}),o=(0,n.Y0)((0,n.Xk)(await(0,F.Y2)(e.body,t)),"body"),a=(0,n.s)(o,{roleCredentials:n.Ss});return Object.assign(s,a),s},mt=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return R(e,t);const s=map({$metadata:h(e)}),o=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),a=take(o,{nextToken:__expectString,roleList:_json});return Object.assign(s,a),s},pt=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return R(e,t);const s=map({$metadata:h(e)}),o=__expectNonNull(__expectObject(await parseBody(e.body,t)),"body"),a=take(o,{accountList:_json,nextToken:__expectString});return Object.assign(s,a),s},yt=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return R(e,t);const s=map({$metadata:h(e)});return await collectBody(e.body,t),s},R=async(e,t)=>{const s={...e,body:await(0,F.CG)(e.body,t)},o=(0,F.cJ)(e,s.body);switch(o){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ee(s,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Ce(s,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Ie(s,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Pe(s,t);default:const a=s.body;return Re({output:e,parsedBody:a,errorCode:o})}},Re=(0,n.jr)(m),Ee=async(e,t)=>{const s=(0,n.Tj)({}),o=e.body,a=(0,n.s)(o,{message:n.lK});Object.assign(s,a);const i=new A({$metadata:h(e),...s});return(0,n.Mw)(i,e.body)},Ce=async(e,t)=>{const s=(0,n.Tj)({}),o=e.body,a=(0,n.s)(o,{message:n.lK});Object.assign(s,a);const i=new T({$metadata:h(e),...s});return(0,n.Mw)(i,e.body)},Ie=async(e,t)=>{const s=(0,n.Tj)({}),o=e.body,a=(0,n.s)(o,{message:n.lK});Object.assign(s,a);const i=new w({$metadata:h(e),...s});return(0,n.Mw)(i,e.body)},Pe=async(e,t)=>{const s=(0,n.Tj)({}),o=e.body,a=(0,n.s)(o,{message:n.lK});Object.assign(s,a);const i=new k({$metadata:h(e),...s});return(0,n.Mw)(i,e.body)},h=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),gt=(e,t)=>collectBody(e,t).then(s=>t.utf8Encoder(s)),L="accountId",E="accessToken",j="account_id",H="maxResults",G="max_result",U="nextToken",M="next_token",be="roleName",Ae="role_name",C="x-amz-sso_bearer_token";class Te extends n.uB.classBuilder().ep(ye).m(function(t,s,o,a){return[(0,me.TM)(o,this.serialize,this.deserialize),(0,$.rD)(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(ge,ve).ser(fe).de(xe).build(){}var V=r(48735),we=r(71815),ke=r(44833),_=r(64203),v=r(40777),Fe=r(71905),I=r(80339),ze=r(37376),B=r(61415);const De=async(e,t,s)=>({operation:(0,B.u)(t).operation,region:await(0,B.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Ne(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function P(e){return{schemeId:"smithy.api#noAuth"}}const Oe=e=>{const t=[];switch(e.operation){case"GetRoleCredentials":{t.push(P(e));break}case"ListAccountRoles":{t.push(P(e));break}case"ListAccounts":{t.push(P(e));break}case"Logout":{t.push(P(e));break}default:t.push(Ne(e))}return t},$e=e=>({...(0,ze.h)(e)}),Le={rE:"3.658.1"};var je=r(12106),He=r(49441),Ge=r(62845),f=r(25691),K=r(25523),Ue=r(59753),Me=r(35155),Ve=r(13884),_e=r(99993),Y=r(65860),Z=r(42677),Be=r(87220),z=r(59161);const q="required",d="fn",c="argv",p="ref",J=!0,W="isSet",x="booleanEquals",y="error",g="endpoint",u="tree",D="PartitionResult",N="getAttr",X={[q]:!1,type:"String"},Q={[q]:!0,default:!1,type:"Boolean"},ee={[p]:"Endpoint"},te={[d]:x,[c]:[{[p]:"UseFIPS"},!0]},se={[d]:x,[c]:[{[p]:"UseDualStack"},!0]},l={},ne={[d]:N,[c]:[{[p]:D},"supportsFIPS"]},oe={[p]:D},ae={[d]:x,[c]:[!0,{[d]:N,[c]:[oe,"supportsDualStack"]}]},re=[te],ie=[se],de=[{[p]:"Region"}],Ke={version:"1.0",parameters:{Region:X,UseDualStack:Q,UseFIPS:Q,Endpoint:X},rules:[{conditions:[{[d]:W,[c]:[ee]}],rules:[{conditions:re,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:y},{conditions:ie,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:y},{endpoint:{url:ee,properties:l,headers:l},type:g}],type:u},{conditions:[{[d]:W,[c]:de}],rules:[{conditions:[{[d]:"aws.partition",[c]:de,assign:D}],rules:[{conditions:[te,se],rules:[{conditions:[{[d]:x,[c]:[J,ne]},ae],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:l,headers:l},type:g}],type:u},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:y}],type:u},{conditions:re,rules:[{conditions:[{[d]:x,[c]:[ne,J]}],rules:[{conditions:[{[d]:"stringEquals",[c]:[{[d]:N,[c]:[oe,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:l,headers:l},type:g},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:l,headers:l},type:g}],type:u},{error:"FIPS is enabled but this partition does not support FIPS",type:y}],type:u},{conditions:ie,rules:[{conditions:[ae],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:l,headers:l},type:g}],type:u},{error:"DualStack is enabled but this partition does not support DualStack",type:y}],type:u},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:l,headers:l},type:g}],type:u}],type:u},{error:"Invalid Configuration: Missing Region",type:y}]},Ye=new z.kS({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ze=(e,t={})=>Ye.get(e,()=>(0,z.sO)(Ke,{endpointParams:e,logger:t.logger}));z.mw.aws=Be.UF;const qe=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Y.E,base64Encoder:e?.base64Encoder??Y.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ze,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Oe,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Ve.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new S.mR}],logger:e?.logger??new n.N4,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??_e.D,utf8Decoder:e?.utf8Decoder??Z.ar,utf8Encoder:e?.utf8Encoder??Z.Pq});var Je=r(17449);const We=e=>{(0,n.I9)(process.version);const t=(0,Je.I)(e),s=()=>t().then(n.lT),o=qe(e);return(0,je.I)(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Ue.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,He.mJ)({serviceId:o.serviceId,clientVersion:Le.rE}),maxAttempts:e?.maxAttempts??(0,f.Z)(I.qs),region:e?.region??(0,f.Z)(v.GG,v.zH),requestHandler:K.$c.create(e?.requestHandler??s),retryMode:e?.retryMode??(0,f.Z)({...I.kN,default:async()=>(await s()).retryMode||Me.L0}),sha256:e?.sha256??Ge.V.bind(null,"sha256"),streamCollector:e?.streamCollector??K.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,f.Z)(v.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,f.Z)(v.Ko)}};var ce=r(18232),le=r(7711);const Xe=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(a){const i=t.findIndex(O=>O.schemeId===a.schemeId);i===-1?t.push(a):t.splice(i,1,a)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(a){s=a},httpAuthSchemeProvider(){return s},setCredentials(a){o=a},credentials(){return o}}},Qe=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),b=e=>e,et=(e,t)=>{const s={...b((0,ce.Rq)(e)),...b((0,n.xA)(e)),...b((0,le.eS)(e)),...b(Xe(e))};return t.forEach(o=>o.configure(s)),{...e,...(0,ce.$3)(s),...(0,n.uv)(s),...(0,le.jt)(s),...Qe(s)}};class tt extends n.Kj{constructor(...[t]){const s=We(t||{}),o=pe(s),a=(0,_.Dc)(o),i=(0,I.$z)(a),O=(0,v.TD)(i),st=(0,V.OV)(O),nt=(0,$.Co)(st),ot=$e(nt),ue=et(ot,t?.extensions||[]);super(ue),this.config=ue,this.middlewareStack.use((0,_.sM)(this.config)),this.middlewareStack.use((0,I.ey)(this.config)),this.middlewareStack.use((0,Fe.vK)(this.config)),this.middlewareStack.use((0,V.TC)(this.config)),this.middlewareStack.use((0,we.Y7)(this.config)),this.middlewareStack.use((0,ke.n4)(this.config)),this.middlewareStack.use((0,S.wB)(this.config,{httpAuthSchemeParametersProvider:De,identityProviderConfigProvider:async at=>new S.h$({"aws.auth#sigv4":at.credentials})})),this.middlewareStack.use((0,S.lW)(this.config))}destroy(){super.destroy()}}}};
